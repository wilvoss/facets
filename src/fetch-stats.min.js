import{createApp}from"/src/helpers/vue.esm-browser.prod.js";import{loadGameplayModules}from"/src/constants/gameplay.js";async function LoadAllModules(){return{...await loadGameplayModules()}}LoadAllModules().then((e=>{const t=createApp({data:()=>({source:"https://facets-get-global-stats.bigtentgames.workers.dev/",isFetching:!1,rawStats:[],stats:[],error:"",userSettingsUsesLightTheme:!1}),methods:{async LoadPage(){this.CheckTheme(),await this.GetStats(),this.stats=this.ProcessRawStats()},async GetStats(){this.isFetching=!0;try{let e=await fetch(this.source,{method:"GET",headers:{"Content-Type":"application/json"}});e.ok?(this.rawStats=await e.json(),this.isFetching=!1):(this.error="Error fetching data: "+e.statusText,this.isFetching=!1)}catch(e){this.error="Error fetching data: "+e,this.isFetching=!1}},CheckTheme(){let e=localStorage.getItem("userSettingsUsesLightTheme");null!=e&&(this.userSettingsUsesLightTheme=JSON.parse(e))},ProcessRawStats(){let t=[];t.push({key:"General",value:[{key:"Games Created",value:this.rawStats.totalGames},{key:"Hard Games",value:this.rawStats.totalHardGames}]});let a=[];this.rawStats.languagesCount.forEach((t=>{a.push({key:e.allLanguages.find((e=>e.tag===t.lang)).name,value:t.count})})),this.SortByValueThenName(a,"key"),t.push({key:"Language",value:a});let s=[];return this.rawStats.wordsetIDCount.forEach((t=>{s.push({key:e.wordSets.find((e=>e.id===t.id)).name,value:t.count})})),this.SortByValueThenName(s,"key"),t.push({key:"Category",value:s}),t},SortByValueThenName(e,t){e.sort(((e,a)=>a.value!==e.value?a.value-e.value:e[t]&&a[t]?e[t].localeCompare(a[t]):0))},HandleOnVisibilityChange(e){this.CheckTheme()}},mounted(){this.LoadPage(),window.addEventListener("visibilitychange",this.HandleOnVisibilityChange)},watch:{},computed:{getLanguageCounts:function(){return[]}}});window.app=t.mount("#app")}));